# Truck Tracker - Render.com Deployment

This is a real-time truck tracking application with historical journey data and ETA calculations.

## Features

- ğŸš› Real-time GPS tracking via SuperDispatch API
- ğŸ“Š Journey average calculation (miles/hours from start date)
- â±ï¸ Smart ETA calculation with 12-hour daily driving schedule
- ğŸ“ˆ Historical data visualization with 5-day cross-country journey
- ğŸ—ºï¸ Interactive map with route display

## Deployment to Render.com

### Method 1: Using render.yaml (Recommended)

1. **Fork/Clone this repository** to your GitHub account

2. **Connect to Render.com:**
   - Go to [render.com](https://render.com)
   - Sign up/Login with GitHub
   - Click "New" â†’ "Blueprint"
   - Connect your GitHub repository
   - Select this repository
   - Render will automatically detect `render.yaml` and configure the service

3. **Deploy:**
   - Click "Apply" to deploy
   - Render will run the build script and start the application
   - Your app will be available at `https://your-app-name.onrender.com`

### Method 2: Manual Setup

1. **Create Web Service:**
   - Go to Render Dashboard
   - Click "New" â†’ "Web Service"
   - Connect your GitHub repository

2. **Configure Settings:**
   - **Name:** `truck-tracker`
   - **Runtime:** `Python 3`
   - **Build Command:** `./build.sh`
   - **Start Command:** `gunicorn --bind 0.0.0.0:$PORT --workers 1 --timeout 120 wsgi:app`
   - **Plan:** `Free`

3. **Environment Variables:**
   - `PYTHON_VERSION`: `3.11.4`
   - `PORT`: (auto-generated by Render)

4. **Deploy:**
   - Click "Create Web Service"
   - Wait for build and deployment

## Environment Variables

The application will work out of the box with default settings. For production use, you may want to configure:

- SuperDispatch API credentials (if you have access)
- Custom starting location coordinates
- Destination coordinates

## File Structure

```
truck_data/
â”œâ”€â”€ location_history.json      # Historical GPS points
â”œâ”€â”€ daily_stats.json          # Daily travel statistics
â”œâ”€â”€ last_location.json        # Most recent location
â””â”€â”€ daily/                    # Per-day tracking files
    â”œâ”€â”€ daily_2025-09-15.json
    â”œâ”€â”€ daily_2025-09-16.json
    â””â”€â”€ ...
```

## Local Development

```bash
# Install dependencies
pip install -r render-requirements.txt

# Run locally
python simple_app_fixed.py

# Access at http://localhost:8080
```

## API Endpoints

- `GET /` - Main tracking interface
- `GET /api/location` - Current location and journey data
- `GET /api/journey_average` - Journey performance metrics

## Data Features

- **Journey Average:** Calculates average speed and daily performance from journey start (Sept 15, 2025)
- **Smart ETA:** 12-hour daily driving schedule (8am-8pm) with weekend awareness
- **Historical Journey:** Pre-loaded with realistic 5-day cross-country trip data
- **Real-time Updates:** Live GPS tracking every 60 seconds

## Troubleshooting

- **Build Fails:** Check that `build.sh` is executable
- **App Won't Start:** Verify `wsgi.py` is present and correct
- **No Data:** Application initializes with default data structure
- **Port Issues:** Render automatically assigns PORT environment variable

## Support

The application includes comprehensive error handling and will create necessary data files on first run.
